/** ****************************************************************************
 * PicoQ v0.0.7
 *
 * A tiny Javascript library to interact with the DOM.
 * (you can download it from npm or github repositories)
 * Copyright (c) 2017 Jclo <jclo@mobilabs.fr> (http://www.mobilabs.fr).
 * Released under the MIT license. You may obtain a copy of the License
 * at: http://www.opensource.org/licenses/mit-license.php).
 * ****************************************************************************/
!function(t,e){"use strict";"function"==typeof define&&define.amd?define([""],e):"object"==typeof exports?(module.exports=e(t),null===t.PicoQ&&(t.PicoQ=e(t))):t.PicoQ=e(t)}(this,function(t){"use strict";var e,n,r,i;return e=function(t){return this instanceof e?t?(this[0]=document.querySelector(t),this):null:new e(t)},n=t.PicoQ,e.noConflict=function(){return t.PicoQ=n,this},e.VERSION="0.0.7",r={u:null,anim:null,ajax:null},e.setTestMode=function(){e.Pic=r},e.prototype={},e._={isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isBoolean:function(t){return!0===t||!1===t||"[object Boolean]"===Object.prototype.toString.call(t)},isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},isNumber:function(t){return"[object Number]"===Object.prototype.toString.call(t)},isNaN:function(t){return e._.isNumber(t)&&t!==+t},isOdd:function(t){var e=t%2;return t===parseFloat(t)?!!e:void 0},isObject:function(t){var e=typeof t;return("function"===e||"object"===e)&&!!t},isLiteralObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},isMath:function(t){return"[object Math]"===Object.prototype.toString.call(t)},isDate:function(t){return"[object Date]"===Object.prototype.toString.call(t)},isEmpty:function(t){var e;if(null===t)return!0;if(this.isArray(t)||this.isString(t))return 0===t.length;for(e in t)if(t.hasOwnProperty(e))return!1;return!0},clone:function(t){var e,n=this.isArray(t)?[]:{};if(this.isObject(t)){for(e in t)this.isArray(t[e])?n[e]=this.clone(t[e]):this.isObject(t[e])?n[e]=this.extend(t[e]):n[e]=t[e];return n}},extend:function(t){var e,n,r;if(!this.isObject(t))return t;for(r=1;r<arguments.length;r++){e=arguments[r];for(n in e)this.isLiteralObject(arguments[r][n])?(t[n]=void 0!==t[n]?t[n]:{},this.extend(t[n],arguments[r][n])):hasOwnProperty.call(e,n)&&(t[n]=this.isArray(e[n])?this.clone(e[n]):e[n])}return t},keys:function(t){return Object.keys(t)},forPropIn:function(t,e){this.keys(t).forEach(function(n){({}).hasOwnProperty.call(t,n)&&e(n)})},assign:function(){var t,e,n,r=arguments[0];for(n=1;n<arguments.length;n++)t=arguments[n],e=Object.keys(t).reduce(function(e,n){return e[n]=Object.getOwnPropertyDescriptor(t,n),e},{});return Object.defineProperties(r,e),r}},i=e._,r.u={normalizeCssPropertyName:function(t){var e,n=i.isString(t)?t.split("-"):[],r="";for(e=0;e<n.length;e++)r+=0===e?n[e]:n[e].charAt(0).toUpperCase()+n[e].slice(1);return r}},e._.extend(e.prototype,{select:function(t){var e;return i.isString(t)&&(e=this[0].querySelector(t))&&(this[0]=e),this},parent:function(){return this.root?this[0]!==this.root&&(this[0]=this[0].parentNode):this[0]=this[0].parentNode,this},firstParent:function(){return this.root&&(this[0]=this.root),this}}),e._.extend(e.prototype,{html:function(t){return t?(this[0].innerHTML=t,this):this[0]?this[0].innerHTML:void 0},empty:function(){for(var t=this[0];t.firstChild;)t.removeChild(t.firstChild);return this},append:function(t){return this[0].insertAdjacentHTML("beforeend",t),this},prepend:function(t){return this[0].insertAdjacentHTML("afterbegin",t),this},after:function(t){return this[0].insertAdjacentHTML("afterend",t),this},before:function(t){return this[0].insertAdjacentHTML("beforebegin",t),this},replaceWith:function(t){var e,n=this[0],r=this[0].parentNode,i=Array.prototype.indexOf.call(r.children,n),s=document.createElement("div");return s.innerHTML=t,e=s.firstChild,r.replaceChild(e,n),this[0]=r.children[i],this},text:function(t){return t?(this[0].textContent=t,this):this[0].textContent},insertChildBefore:function(t,e){return t&&this[0].insertBefore(t,e),this},removeChild:function(t){return t&&this[0].removeChild(t),this}}),e._.extend(e.prototype,{css:function(t,e){var n=r.u.normalizeCssPropertyName(t);return e?(this[0].style[n]=e,this):this[0].style[n]}}),e._.extend(e.prototype,{getClassList:function(){return this[0].classList},addClass:function(t){return this[0].classList.add(t),this},removeClass:function(t){return this[0].classList.remove(t),this},toggleClass:function(t){return this[0].classList.toggle(t),this}}),e._.extend(e.prototype,{attr:function(t,e){return e?(this[0].setAttribute(t,e),this):this[0].getAttribute(t)},removeAttr:function(t){return this[0].removeAttribute(t),this}}),e._.extend(e.prototype,{on:function(t,e){return this[0].addEventListener(t,e),this},off:function(t,e){return this[0].removeEventListener(t,e),this},trigger:function(t){var e;return Event?e=new Event(t):(e=document.createEvent("Event")).initEvent(t,!0,!0),this[0].dispatchEvent(e)}}),r.anim={extractArgs:function(t,e,n){var r,s,a;switch(t||e||n?!t||e||e?t&&e&&!n?2:3:1:0){case 0:break;case 1:i.isNumber(t)||"fast"===t||"slow"===t?r=t:i.isString(t)?s=t:i.isFunction(t)&&(a=t);break;case 2:i.isNumber(t)||"fast"===t||"slow"===t?(r=t,i.isString(e)?s=e:i.isFunction(e)&&(a=e)):i.isString(t)&&(s=t,i.isFunction(e)&&(a=e));break;case 3:(i.isNumber(t)||"fast"===t||"slow"===t)&&(r=t),i.isString(e)&&(s=e),i.isFunction(n)&&(a=n)}return{duration:r,easing:s,callback:a}},getProps:function(t,e){var n,i,s,a,o=Object.keys(e),c=window.getComputedStyle(t),u={},l=[];for(a=0;a<o.length;a++)n=r.u.normalizeCssPropertyName(o[a]),(i=c.getPropertyValue(n))&&(l.push(n),i=parseFloat(i,10),"%"===(s=e[o[a]].replace(/[0-9.]/g,""))&&(i=i/parseFloat(window.getComputedStyle(t.parentNode).getPropertyValue(n))*100),u[n]={initial:i,change:parseFloat(e[o[a]])-i,suffix:s});return u.name=l,u},run:function(t,e,n,i,s,a){var o,c,u,l=r.anim.getProps(t,e),f=t,h=0;o=setInterval(function(){for(u=0;u<l.name.length;u++)c=n(h,l[l.name[u]].initial,l[l.name[u]].change,i),f.style[l.name[u]]=c+l[l.name[u]].suffix;(h+=s)>i&&(clearInterval(o),a&&a())},s)},swing:function(t,e,n,r){return n*(.5-Math.cos(t/r*Math.PI)/2)+e}},e._.extend(e.prototype,{animate:function(t,n,s,a){var o,c,u,l,f=this[0];return i.isLiteralObject(t)?(o=r.anim.extractArgs(n,s,a),c=i.isNumber(o.duration)?o.duration:function(t){return"fast"===t?200:"slow"===t?600:400}(o.duration),u=e._easing&&e._easing[o.easing]?e._easing[o.easing]:r.anim.swing,l=o.callback?o.callback:null,r.anim.run(f,t,u,c,10,l),e.VDOM&&(this.probe={duration:c,easing:e._easing&&e._easing[o.easing]?o.easing:"swing",callback:l}),this):this}}),r.ajax={getDefaultSettings:function(){return{url:"",method:"GET",dataType:"text",contentType:"application/x-www-form-urlencoded; charset=UTF-8"}},getArguments:function(t){var e,n,r=this.getDefaultSettings();switch(t.length){case 0:e="",n=i.extend(r);break;case 1:i.isString(t[0])?(e=t[0],n=i.extend(r)):i.isLiteralObject(t[0])?(e=i.isString(t[0].url)?t[0].url:"",n=i.extend(r,t[0])):(e="",n=i.extend(r));break;case 2:default:e=i.isString(t[0])?t[0]:"",n=i.isLiteralObject(t[1])?i.extend(r,t[1]):i.extend(r)}return{url:e,settings:n}},getSettings:function(t){var e={url:null,data:null,success:null,dataType:null};switch(t.length){case 0:break;case 1:if(i.isString(t[0])){e.url=t[0];break}i.isLiteralObject(t[0])&&(e=t[0]);break;case 2:if(!i.isString(t[0]))break;if(e.url=t[0],i.isLiteralObject(t[1])){e.data=t[1];break}if(i.isFunction(t[1])){e.success=t[1];break}i.isString(t[1])&&(e.dataType=t[1]);break;case 3:if(!i.isString(t[0]))break;if(e.url=t[0],i.isLiteralObject(t[1])){if(e.data=t[1],i.isFunction(t[2])){e.success=t[2];break}i.isString(t[2])&&(e.dataType=t[2]);break}i.isFunction(t[1])&&(e.success=t[1]),i.isString(t[2])&&(e.dataType=t[2]);break;case 4:default:if(!i.isString(t[0]))break;e.url=t[0],i.isLiteralObject(t[1])&&(e.data=t[1]),i.isFunction(t[2])&&(e.success=t[2]),i.isString(t[3])&&(e.dataType=t[3])}return e},encodeParams:function(t){var e,n,r="";if(!i.isLiteralObject(t))return null;for(e=Object.keys(t),n=0;n<e.length;n++)r+=0===n?e[n]+"="+encodeURIComponent(t[e[n]]):"&"+e[n]+"="+encodeURIComponent(t[e[n]]);return r},register:function(t,e,n){return function(r){var i={};return r?(i[n]=r,e.push(i)):(i[n]=null,e.push(i)),t}},fire:function(t,e,n){var r,s,a;switch(n){case"success":for(a=0;a<t.length;a++)r=Object.keys(t[a])[0],s=t[a][r],!i.isFunction(s)||"done"!==r&&"always"!==r&&"success"!==r||s(e.responseText,e.statusText,e);break;case"error":for(a=0;a<t.length;a++)r=Object.keys(t[a])[0],"function"!=typeof(s=t[a][r])||"fail"!==r&&"always"!==r||s(e,e.statusText);break;default:throw new Error("Pic.ajax.fire: this case must never happen!")}}},e.ajax=function(){var t=r.ajax,e=t.getArguments(arguments),n=new window.XMLHttpRequest,i=[],s=e.url,a=e.settings;return n.done=t.register(n,i,"done"),n.fail=t.register(n,i,"fail"),n.always=t.register(n,i,"always"),n.onreadystatechange=function(){4===n.readyState&&(200===n.status||0===n.status?(t.fire(i,n,"success"),a.success&&("json"===a.dataType?a.success(JSON.parse(n.responseText),n.statusText,n):a.success(n.responseText,n.statusText,n))):t.fire(i,n,"error"))},"GET"===a.method?(a.data&&(s+="?"+t.encodeParams(a.data)),n.open("GET",s,!0),n.send(null)):(n.open("POST",s,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(t.encodeParams(a.data))),n},e.get=function(){var t=r.ajax.getSettings(arguments);return t.method="GET",e.ajax(t)},e.getJSON=function(){var t=r.ajax.getSettings(arguments);return t.method="GET",t.dataType="json",e.ajax(t)},e.post=function(){var t=r.ajax.getSettings(arguments);return t.method="POST",e.ajax(t)},e._.extend(e.prototype,{load:function(){var t,n=this,s=r.ajax.getSettings(arguments);return this[0]?(t=s.success,s.success=void 0,s.method=s.data?"POST":"GET",e.ajax(s).done(function(e){n.html(e),i.isFunction(t)&&t()}),this):this}}),e});