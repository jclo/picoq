/**
 * PicoQ v0.0.3
 *
 * A tiny Javascript library to interact with the DOM
 * Copyright (c) 2017 Jclo <jclo@mobilabs.fr> (http://www.mobilabs.fr).
 * Released under the MIT license. You may obtain a copy of the License
 * at: http://www.opensource.org/licenses/mit-license.php).
 */
!function(t,e){"use strict";"function"==typeof define&&define.amd?define([""],e):"object"==typeof exports?module.exports=e():t.PicoQ=e()}(this,function(){"use strict";var t,e,n,r;return t=function(n){return this instanceof t?n?(this[0]=e.querySelector(n),this):null:(e=t.VDOM?t.VDOM.window.document:window.document,new t(n))},t.prototype={},t._={isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isBoolean:function(t){return!0===t||!1===t||"[object Boolean]"===Object.prototype.toString.call(t)},isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},isNumber:function(t){return"[object Number]"===Object.prototype.toString.call(t)},isNaN:function(e){return t._.isNumber(e)&&e!==+e},isOdd:function(t){var e=t%2;return t===parseFloat(t)?!!e:void 0},isObject:function(t){var e=typeof t;return("function"===e||"object"===e)&&!!t},isLiteralObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},extend:function(t){var e,n,r;for(r=1;r<arguments.length;r++){e=arguments[r];for(n in e)hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}},n=t._,t.utilities={normalizeCssPropertyName:function(t){var e,r=n.isString(t)?t.split("-"):[],i="";for(e=0;e<r.length;e++)i+=0===e?r[e]:r[e].charAt(0).toUpperCase()+r[e].slice(1);return i}},r=t.utilities,t._.extend(t.prototype,{html:function(t){return t?(this[0].innerHTML=t,this):this[0]?this[0].innerHTML:void 0},empty:function(){for(var t=this[0];t.firstChild;)t.removeChild(t.firstChild);return this},append:function(t){return this[0].insertAdjacentHTML("beforeend",t),this},prepend:function(t){return this[0].insertAdjacentHTML("afterbegin",t),this},after:function(t){return this[0].insertAdjacentHTML("afterend",t),this},before:function(t){return this[0].insertAdjacentHTML("beforebegin",t),this},replaceWith:function(t){var n,r=this[0],i=this[0].parentNode,s=Array.prototype.indexOf.call(i.children,r),a=e.createElement("div");return a.innerHTML=t,n=a.firstChild,i.replaceChild(n,r),this[0]=i.children[s],this},text:function(t){return t?(this[0].textContent=t,this):this[0].textContent}}),t._.extend(t.prototype,{css:function(t,e){var n=r.normalizeCssPropertyName(t);return e?(this[0].style[n]=e,this):this[0].style[n]}}),t._.extend(t.prototype,{getClassList:function(){return this[0].classList},addClass:function(t){return this[0].classList.add(t),this},removeClass:function(t){return this[0].classList.remove(t),this},toggleClass:function(t){return this[0].classList.toggle(t),this}}),t._.extend(t.prototype,{attr:function(t,e){return e?(this[0].setAttribute(t,e),this):this[0].getAttribute(t)},removeAttr:function(t){return this[0].removeAttribute(t),this}}),t._.extend(t.prototype,{on:function(t,e){return this[0].addEventListener(t,e),this},off:function(t,e){return this[0].removeEventListener(t,e),this},trigger:function(t){var n;return Event?n=new Event(t):(n=e.createEvent("Event")).initEvent(t,!0,!0),this[0].dispatchEvent(n)}}),t._anim={extractArgs:function(t,e,r){var i,s,a;switch(t||e||r?!t||e||e?t&&e&&!r?2:3:1:0){case 0:break;case 1:n.isNumber(t)||"fast"===t||"slow"===t?i=t:n.isString(t)?s=t:n.isFunction(t)&&(a=t);break;case 2:n.isNumber(t)||"fast"===t||"slow"===t?(i=t,n.isString(e)?s=e:n.isFunction(e)&&(a=e)):n.isString(t)&&(s=t,n.isFunction(e)&&(a=e));break;case 3:(n.isNumber(t)||"fast"===t||"slow"===t)&&(i=t),n.isString(e)&&(s=e),n.isFunction(r)&&(a=r)}return{duration:i,easing:s,callback:a}},getProps:function(t,e){var n,i,s=Object.keys(e),a={},o=[];for(i=0;i<s.length;i++)n=r.normalizeCssPropertyName(s[i]),t.style[n]&&(o.push(n),a[n]={initial:parseFloat(t.style[n],10),change:parseFloat(e[s[i]])-parseFloat(t.style[n]),suffix:t.style[n].replace(/[0-9.]/g,"")});return a.name=o,a},run:function(e,n,r,i,s,a){var o,c,u=t._anim.getProps(e,n),l=e,f=0;o=setInterval(function(){for((f+=s)>i&&(clearInterval(o),a&&a()),c=0;c<u.name.length;c++)l.style[u.name[c]]=r(f,u[u.name[c]].initial,u[u.name[c]].change,i)+u[u.name[c]].suffix},s)},swing:function(t,e,n,r){return n*(.5-Math.cos(t/r*Math.PI)/2)+e}},t._.extend(t.prototype,{animate:function(e,r,i,s){var a,o,c,u,l=this[0];return n.isLiteralObject(e)?(a=t._anim.extractArgs(r,i,s),o=n.isNumber(a.duration)?a.duration:function(t){return"fast"===t?200:"slow"===t?600:400}(a.duration),c=t._easing&&t._easing[a.easing]?t._easing[a.easing]:t._anim.swing,u=a.callback?a.callback:null,t._anim.run(l,e,c,o,10,u),t.VDOM&&(this.probe={duration:o,easing:t._easing&&t._easing[a.easing]?a.easing:"swing",callback:u}),this):this}}),t._ajax={getDefaultSettings:function(){return{url:"",method:"GET",dataType:"text",contentType:"application/x-www-form-urlencoded; charset=UTF-8"}},getArguments:function(e){var r,i,s=t._ajax.getDefaultSettings();switch(e.length){case 0:r="",i=n.extend(s);break;case 1:n.isString(e[0])?(r=e[0],i=n.extend(s)):n.isLiteralObject(e[0])?(r=n.isString(e[0].url)?e[0].url:"",i=n.extend(s,e[0])):(r="",i=n.extend(s));break;case 2:default:r=n.isString(e[0])?e[0]:"",i=n.isLiteralObject(e[1])?n.extend(s,e[1]):n.extend(s)}return{url:r,settings:i}},getSettings:function(t){var e={url:null,data:null,success:null,dataType:null};switch(t.length){case 0:break;case 1:if(n.isString(t[0])){e.url=t[0];break}n.isLiteralObject(t[0])&&(e=t[0]);break;case 2:if(!n.isString(t[0]))break;if(e.url=t[0],n.isLiteralObject(t[1])){e.data=t[1];break}if(n.isFunction(t[1])){e.success=t[1];break}n.isString(t[1])&&(e.dataType=t[1]);break;case 3:if(!n.isString(t[0]))break;if(e.url=t[0],n.isLiteralObject(t[1])){if(e.data=t[1],n.isFunction(t[2])){e.success=t[2];break}n.isString(t[2])&&(e.dataType=t[2]);break}n.isFunction(t[1])&&(e.success=t[1]),n.isString(t[2])&&(e.dataType=t[2]);break;case 4:default:if(!n.isString(t[0]))break;e.url=t[0],n.isLiteralObject(t[1])&&(e.data=t[1]),n.isFunction(t[2])&&(e.success=t[2]),n.isString(t[3])&&(e.dataType=t[3])}return e},encodeParams:function(t){var e,r,i="";if(!n.isLiteralObject(t))return null;for(e=Object.keys(t),r=0;r<e.length;r++)i+=0===r?e[r]+"="+encodeURIComponent(t[e[r]]):"&"+e[r]+"="+encodeURIComponent(t[e[r]]);return i},register:function(t,e,n){return function(r){var i={};return r?(i[n]=r,e.push(i)):(i[n]=null,e.push(i)),t}},fire:function(t,e,r){var i,s,a;switch(r){case"success":for(a=0;a<t.length;a++)i=Object.keys(t[a])[0],s=t[a][i],!n.isFunction(s)||"done"!==i&&"always"!==i&&"success"!==i||s(e.responseText,e.statusText,e);break;case"error":for(a=0;a<t.length;a++)i=Object.keys(t[a])[0],"function"!=typeof(s=t[a][i])||"fail"!==i&&"always"!==i||s(e,e.statusText);break;default:throw new Error("PicoQ._ajax.fire: this case must never happen!")}}},t.ajax=function(){var e=t._ajax,n=e.getArguments(arguments),r=new(t.VDOM?t.VDOM.window.XMLHttpRequest:window.XMLHttpRequest),i=[],s=n.url,a=n.settings;return r.done=e.register(r,i,"done"),r.fail=e.register(r,i,"fail"),r.always=e.register(r,i,"always"),r.onreadystatechange=function(){4===r.readyState&&(200===r.status||0===r.status?(e.fire(i,r,"success"),a.success&&("json"===a.dataType?a.success(JSON.parse(r.responseText),r.statusText,r):a.success(r.responseText,r.statusText,r))):e.fire(i,r,"error"))},"GET"===a.method?(a.data&&(s+="?"+e.encodeParams(a.data)),r.open("GET",s,!0),r.send(null)):(r.open("POST",s,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(e.encodeParams(a.data))),r},t.get=function(){var e=t._ajax.getSettings(arguments);return e.method="GET",t.ajax(e)},t.getJSON=function(){var e=t._ajax.getSettings(arguments);return e.method="GET",e.dataType="json",t.ajax(e)},t.post=function(){var e=t._ajax.getSettings(arguments);return e.method="POST",t.ajax(e)},t._.extend(t.prototype,{load:function(){var e,r=this,i=t._ajax.getSettings(arguments);return this[0]?(e=i.success,i.success=void 0,i.method=i.data?"POST":"GET",t.ajax(i).done(function(t){r.html(t),n.isFunction(e)&&e()}),this):this}}),t.VERSION="0.0.3",t});